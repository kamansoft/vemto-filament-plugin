(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["kamansoft-filament"]=t():e["kamansoft-filament"]=t()})("undefined"!==typeof self?self:this,(()=>(()=>{"use strict";var e={};(()=>{e.d=(t,s)=>{for(var i in s)e.o(s,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:s[i]})}})(),(()=>{e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{e.p=""})();var t={};if(e.d(t,{default:()=>u}),"undefined"!==typeof window){var s=window.document.currentScript,i=s&&s.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);i&&(e.p=i[1])}var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"w-full"},[s("label",{staticClass:"block text-sm font-bold"},[e._v("Filament")]),s("small",{staticClass:"mb-2"},[e._v("Select the CRUDs to generate a Filament Resource")]),s("div",{staticClass:"mt-5"},[s("label",{staticClass:"block text-sm font-bold mb-2"},[e._v("Project CRUDs")]),s("div",{staticClass:"form-check mb-3"},[s("label",{staticClass:"inline-flex items-center",attrs:{for:"selectAllCruds"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.pluginData.allSelected,expression:"pluginData.allSelected"}],staticClass:"form-checkbox",attrs:{type:"checkbox",id:"selectAllCruds"},domProps:{checked:Array.isArray(e.pluginData.allSelected)?e._i(e.pluginData.allSelected,null)>-1:e.pluginData.allSelected},on:{change:[function(t){var s=e.pluginData.allSelected,i=t.target,a=!!i.checked;if(Array.isArray(s)){var l=null,r=e._i(s,l);i.checked?r<0&&e.$set(e.pluginData,"allSelected",s.concat([l])):r>-1&&e.$set(e.pluginData,"allSelected",s.slice(0,r).concat(s.slice(r+1)))}else e.$set(e.pluginData,"allSelected",a)},e.selectAllData]}}),s("span",{staticClass:"ml-2 text-gray-800 dark:text-gray-300"},[e._v("Select All")])])]),e.pluginData.cruds?e._l(e.projectCruds,(function(t){return s("div",{key:"crud"+t.id,staticClass:"bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-900 p-2 rounded-md my-3"},[s("div",{staticClass:"form-check"},[s("label",{staticClass:"inline-flex items-center text-gray-800",attrs:{for:t.id}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.pluginData.cruds[t.id]["selected"],expression:"pluginData.cruds[crud.id]['selected']"}],staticClass:"form-checkbox",attrs:{type:"checkbox",id:t.id},domProps:{checked:Array.isArray(e.pluginData.cruds[t.id]["selected"])?e._i(e.pluginData.cruds[t.id]["selected"],null)>-1:e.pluginData.cruds[t.id]["selected"]},on:{change:[function(s){var i=e.pluginData.cruds[t.id]["selected"],a=s.target,l=!!a.checked;if(Array.isArray(i)){var r=null,c=e._i(i,r);a.checked?c<0&&e.$set(e.pluginData.cruds[t.id],"selected",i.concat([r])):c>-1&&e.$set(e.pluginData.cruds[t.id],"selected",i.slice(0,c).concat(i.slice(c+1)))}else e.$set(e.pluginData.cruds[t.id],"selected",l)},function(s){return e.toggleCrudData(t)}]}}),s("span",{staticClass:"ml-2 text-gray-800 dark:text-gray-100"},[e._v(e._s(t.name))])])]),s("div",{staticClass:"form-check mt-1 ml-3"},[s("label",{staticClass:"inline-flex items-center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.pluginData.cruds[t.id]["inputs"],expression:"pluginData.cruds[crud.id]['inputs']"}],staticClass:"form-checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.pluginData.cruds[t.id]["inputs"])?e._i(e.pluginData.cruds[t.id]["inputs"],null)>-1:e.pluginData.cruds[t.id]["inputs"]},on:{change:[function(s){var i=e.pluginData.cruds[t.id]["inputs"],a=s.target,l=!!a.checked;if(Array.isArray(i)){var r=null,c=e._i(i,r);a.checked?c<0&&e.$set(e.pluginData.cruds[t.id],"inputs",i.concat([r])):c>-1&&e.$set(e.pluginData.cruds[t.id],"inputs",i.slice(0,c).concat(i.slice(c+1)))}else e.$set(e.pluginData.cruds[t.id],"inputs",l)},e.save]}}),s("span",{staticClass:"ml-2 text-gray-800 dark:text-gray-300"},[e._v("Inputs")])])]),s("small",{staticClass:"mb-1 ml-3"},[e._v("Relationships")]),e._l(e.getAllRelationshipsFromModel(t.model),(function(i){return s("div",{key:"rel"+i.id,staticClass:"form-check my-1 ml-3"},[s("label",{staticClass:"inline-flex items-center"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.pluginData.cruds[t.id]["relationships"][i.id].selected,expression:"pluginData.cruds[crud.id]['relationships'][relationship.id].selected"}],staticClass:"form-checkbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.pluginData.cruds[t.id]["relationships"][i.id].selected)?e._i(e.pluginData.cruds[t.id]["relationships"][i.id].selected,null)>-1:e.pluginData.cruds[t.id]["relationships"][i.id].selected},on:{change:[function(s){var a=e.pluginData.cruds[t.id]["relationships"][i.id].selected,l=s.target,r=!!l.checked;if(Array.isArray(a)){var c=null,n=e._i(a,c);l.checked?n<0&&e.$set(e.pluginData.cruds[t.id]["relationships"][i.id],"selected",a.concat([c])):n>-1&&e.$set(e.pluginData.cruds[t.id]["relationships"][i.id],"selected",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.pluginData.cruds[t.id]["relationships"][i.id],"selected",r)},e.save]}}),s("span",{staticClass:"ml-2 text-gray-800 dark:text-gray-300"},[e._v(e._s(i.type.case("pascalCase")+" ("+i.name.case("pascalCase")+")"))])])])}))],2)})):e._e()],2)])},l=[];const r={data(){return{projectCruds:[],pluginData:[],vemtoProject:{}}},created(){this.vemtoProject=window.vemtoApi.getProject(),this.pluginData=window.vemtoApi.getPluginData(),this.projectCruds=this.vemtoProject.getMainCruds(),this.pluginData.cruds&&(this.checkNewProjectCruds(),this.checkNewModelRelationships())},methods:{checkNewModelRelationships(){this.projectCruds.forEach((e=>{let t=this.pluginData.cruds.find((t=>t&&t.id===e.id));if(!t)return;let s=this.getAllRelationshipsFromModel(e.model);s.forEach((s=>{t.relationships[s.id]||this.$set(this.pluginData.cruds[e.id].relationships,s.id,{selected:!1})}))})),this.save()},getAllRelationshipsFromModel(e){let t=e.getAllRelationships(),s=e.getAllMorphRelationships();return[].concat(t,s)},toggleCrudData(e){let t=this.pluginData.cruds[e.id];t&&t.relationships&&(this.$set(t,"inputs",t.selected),t.relationships.forEach(((e,s)=>{e&&t.relationships[s]&&this.$set(t.relationships[s],"selected",t.selected)})),this.toggleCrudModule(e.id,t.selected),this.save())},selectAllData(e){let t=e.target.checked;this.pluginData.cruds.forEach(((e,s)=>{e&&(e.selected=t,e.inputs=t,this.toggleCrudModule(s,t),e.relationships.forEach(((s,i)=>{s&&(e.relationships[i].selected=t)})))})),this.save()},toggleCrudModule(e,t){t?this.vemtoProject.purgeRemovedModule("crud-settings",e):this.vemtoProject.registerRemovedModule("crud-settings",e)},checkNewProjectCruds(){this.projectCruds.forEach((e=>{if(this.pluginData.cruds[e.id])return;let t={selected:!1,id:e.id,inputs:!1,relationships:[]},s=this.getAllRelationshipsFromModel(e.model);s.length&&s.forEach((e=>{t.relationships[e.id]={},t.relationships[e.id].selected=!1})),this.$set(this.pluginData.cruds,e.id,t)})),this.save()},save:window.vemtoApi.debounce((function(){window.vemtoApi.savePluginData({cruds:this.pluginData.cruds,allSelected:this.pluginData.allSelected})}),300)}},c=r;function n(e,t,s,i,a,l,r,c){var n,d="function"===typeof e?e.options:e;if(t&&(d.render=t,d.staticRenderFns=s,d._compiled=!0),i&&(d.functional=!0),l&&(d._scopeId="data-v-"+l),r?(n=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(r)},d._ssrRegister=n):a&&(n=c?function(){a.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:a),n)if(d.functional){d._injectStyles=n;var o=d.render;d.render=function(e,t){return n.call(t),o(e,t)}}else{var u=d.beforeCreate;d.beforeCreate=u?[].concat(u,n):[n]}return{exports:e,options:d}}var d=n(c,a,l,!1,null,null,null);const o=d.exports,u=o;return t=t["default"],t})()));
//# sourceMappingURL=kamansoft-filament.umd.min.js.map